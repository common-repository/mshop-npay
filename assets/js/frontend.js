var mnpIsMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return mnpIsMobile.Android()||mnpIsMobile.BlackBerry()||mnpIsMobile.iOS()||mnpIsMobile.Opera()||mnpIsMobile.Windows()}},MNP_Hook=("no"===_mnp.load_script_static&&(mnpIsMobile.any()?document.write("<script type='text/javascript' src='"+_mnp.button_js_url_mobile+"' charset='UTF-8'><\/script>"):document.write("<script type='text/javascript' src='"+_mnp.button_js_url_pc+"' charset='UTF-8'><\/script>")),{hooks:[],add_filter:function(t,n){void 0===MNP_Hook.hooks[t]&&(MNP_Hook.hooks[t]=[]),MNP_Hook.hooks[t].push(n)},reset_filter:function(t){MNP_Hook.hooks[t]=[]},apply_filters:function(t,n){if(void 0!==MNP_Hook.hooks[t])for(var a=0;a<MNP_Hook.hooks[t].length;++a)n[0]=MNP_Hook.hooks[t][a](arguments);return n[0]}});jQuery(document).ready(function(i){var n,a,o,r=null,e=function(t){return t.is(".processing")||t.parents(".processing").length},u=function(t){e(t)||t.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},p=function(t){t.removeClass("processing").unblock()},s=null;function c(){var a,o=[],r=jQuery(_mnp.wrapper_selector+":first"),t=1,n=r.find('input[name="quantity"]'),e=(0<n.length&&(t=n.val()),!0),n=jQuery("form.cart .required-product-addon");return 0<n.length&&i.each(n,function(t,n){n=i("input[name^=addon]",n).serialize().split("=");if(n.length<2||""===n[1])return e=!1}),e?(r.hasClass(_mnp.product_variable_class)?s&&(r.find('input[name="product_id"]').val(),a=s.attributes,i.each(a,function(t,n){a[t]=r.find('select[name="'+t+'"]').val()}),o.push({product_id:r.find('input[name="variation_id"]').val(),parent_product_id:r.find('input[name="product_id"]').val(),quantity:t,attributes:a,form_data:i("form.cart").serialize()})):r.hasClass(_mnp.product_simple_class)?o.push({product_id:r.find('[name="add-to-cart"]').val(),parent_product_id:"",quantity:t,attributes:null,form_data:i("form.cart").serialize()}):r.hasClass(_mnp.product_grouped_class)&&(n=i("tr.woocommerce-grouped-product-list-item",r),i.each(n,function(t,n){var a=i("input[name=add-to-cart]",i(n)).val(),n=(void 0===a&&(a=i("input[name^=quantity]",i(n)).attr("name").replace(/^quantity|\[|\]/g,"")),i('input[name="quantity['+a+']"]',i(n)).val());0<n&&o.push({product_id:a,parent_product_id:"",quantity:n,attributes:null,form_data:null})})),MNP_Hook.apply_filters("get_product_info",[o])):o}function l(t){t&&(t.preventDefault(),t.stopPropagation(),!1===t.result)||(!1!==r.triggerHandler("npay-process-purchase",this)&&(t=c(),_.isEmpty(t)?alert("구매할 상품의 옵션을 선택하세요."):e(r.parent())||(u(r.parent()),i.ajax({type:"post",dataType:"json",url:_mnp.ajax_url,data:{action:_mnp.create_order_action,products:t},success:function(t){var n;t.success?(n=_mnp.order_url_pc+t.data.authkey+"/"+t.data.shopcode,mnpIsMobile.any()&&(n=_mnp.order_url_mobile+t.data.authkey+"/"+t.data.shopcode),mnpIsMobile.any()||"in-page"===_mnp.transition_mode?window.location.href=n:null===window.open(n,"_blank")&&alert("팝업이 차단되어 있습니다. 팝업설정을 변경하신 후 다시 시도해주세요.")):alert(t.data.message),p(r.parent())},error:function(){p(r.parent())}}))),i("form.cart").off("submit",l))}function d(){"yes"===_mnp.use_submit_handler?(i("form.cart").isBound("submit",l)||i("form.cart").on("submit",l),i("form.cart").trigger("submit")):l(null)}function m(t){var n=c();_.isEmpty(n)?alert("구매할 상품의 옵션을 선택하세요."):e(r.parent())||(u(r.parent()),i.ajax({type:"post",dataType:"json",url:_mnp.ajax_url,data:{action:_mnp.add_to_wishlist_action,products:n},success:function(t){var n;t.success?mnpIsMobile.any()?(n=i(t.data.html),i("body").append(n),n.submit()):null===(n=window.open("","","scrollbars=yes,width=400,height=267"))?alert("팝업이 차단되어 있습니다. 팝업설정을 변경하신 후 다시 시도해주세요."):n.document.write(t.data.html):alert(t.data.message),p(r.parent())},error:function(){p(r.parent())}}))}i.fn.isBound=function(t,n){return void 0!==this.data("events")&&void 0!==(t=this.data("events")[t])&&0!==t.length&&-1!==i.inArray(n,_.pluck(t,"handler"))},i("body").on("process_npay_purchase",function(){d()}),"undefined"!=typeof _msdp_cart&&_msdp_cart.is_shortcode?i("form.cart").on("npay_init",function(){n=i(this);var t=i("[name=add-to-cart]",n).val();0<(r=i("#"+("checkout_button_wrapper_"+t))).length&&(r.empty(),naver.NaverPayButton.apply({BUTTON_KEY:_mnp.button_key,TYPE:mnpIsMobile.any()?_mnp.button_type_mobile:_mnp.button_type_pc,COLOR:_mnp.button_color,COUNT:mnpIsMobile.any()?_mnp.button_count_mobile:_mnp.button_count_pc,ENABLE:"Y",EMBED_ID:"checkout_button_wrapper_"+t,BUY_BUTTON_HANDLER:d,WISHLIST_BUTTON_HANDLER:m}))}):(o=a="",i.each(i("[name=add-to-cart]",i("form.cart")),function(t,n){if(a=i(n).val(),0<(r=i("#"+(o="checkout_button_wrapper_"+a))).length)return!1}),naver.NaverPayButton.apply({BUTTON_KEY:_mnp.button_key,TYPE:mnpIsMobile.any()?_mnp.button_type_mobile:_mnp.button_type_pc,COLOR:_mnp.button_color,COUNT:mnpIsMobile.any()?_mnp.button_count_mobile:_mnp.button_count_pc,ENABLE:"Y",EMBED_ID:o,BUY_BUTTON_HANDLER:d,WISHLIST_BUTTON_HANDLER:m}));var t=i("form.variations_form");0<t.length&&(t.on("found_variation",function(t,n){s=n.is_in_stock&&0<n.display_price?JSON.parse(JSON.stringify(n)):null}),t.on("hide_variation",function(t,n){s=null}),t.trigger("check_variations",["",!1]))});